# 代码审查清单 (Code Review Checklist)

## 1. 代码风格 (Code Style)

### 1.1 命名规范
- [ ] 变量/函数命名清晰，能准确表达意图
- [ ] 类/组件命名符合规范（PascalCase）
- [ ] 常量命名规范（UPPER_SNAKE_CASE）
- [ ] 布尔值命名以 `is`, `has`, `can` 开头
- [ ] 私有成员以下划线标识

### 1.2 代码格式
- [ ] 缩进正确（2 空格）
- [ ] 行宽未超过 100 字符
- [ ] 运算符两侧有空格
- [ ] 大括号使用正确（K&R 风格）
- [ ] 字符串引号使用一致

### 1.3 注释规范
- [ ] 注释使用中文，解释业务逻辑
- [ ] 无冗余注释（不说显而易见的废话）
- [ ] 复杂逻辑有清晰注释
- [ ] TODO/FIXME 标记格式规范

## 2. 架构设计 (Architecture Design)

### 2.1 单一职责
- [ ] 类/函数职责单一
- [ ] 无上帝类/上帝方法
- [ ] 方法长度适中（建议 < 50 行）
- [ ] 类长度适中（建议 < 500 行）

### 2.2 依赖关系
- [ ] 依赖抽象，而非具体实现
- [ ] 无循环依赖
- [ ] 依赖注入使用正确
- [ ] 配置文件外部化

### 2.3 设计模式
- [ ] 合理使用设计模式
- [ ] 无过度设计
- [ ] 遵循 SOLID 原则

## 3. 业务逻辑 (Business Logic)

### 3.1 正确性
- [ ] 业务规则实现正确
- [ ] 边界条件处理完整
- [ ] 异常流程覆盖全面
- [ ] 无死代码/无效代码

### 3.2 完整性
- [ ] 参数校验完整
- [ ] 返回值处理正确
- [ ] 状态流转正确
- [ ] 事务边界合理

### 3.3 一致性
- [ ] 与现有代码风格一致
- [ ] 与业务规则一致
- [ ] 与 API 文档一致
- [ ] 与数据库设计一致

## 4. 性能优化 (Performance)

### 4.1 数据库
- [ ] 无 N+1 查询问题
- [ ] 合理使用索引
- [ ] 查询优化（避免 SELECT *）
- [ ] 批量操作替代循环操作

### 4.2 缓存
- [ ] 合理使用缓存
- [ ] 缓存一致性处理
- [ ] 缓存穿透/击穿/雪崩处理
- [ ] 缓存过期策略合理

### 4.3 代码层面
- [ ] 循环内无耗时操作
- [ ] 对象复用合理
- [ ] 异步操作使用正确
- [ ] 无内存泄漏

## 5. 安全性 (Security)

### 5.1 注入攻击
- [ ] 防止 SQL 注入（使用参数化查询）
- [ ] 防止 XSS 攻击（输出编码）
- [ ] 防止 CSRF 攻击（Token 验证）
- [ ] 防止命令注入

### 5.2 认证授权
- [ ] 认证逻辑正确
- [ ] 权限控制完整
- [ ] 敏感数据脱敏
- [ ] 密码加密存储

### 5.3 日志审计
- [ ] 敏感操作有日志
- [ ] 日志不包含敏感信息
- [ ] 日志格式规范
- [ ] 错误日志有堆栈信息

## 6. 错误处理 (Error Handling)

### 6.1 异常处理
- [ ] 异常分类合理（业务异常 vs 系统异常）
- [ ] 异常信息清晰（对用户友好）
- [ ] 异常被正确捕获和处理
- [ ] 无吞掉异常的情况

### 6.2 降级熔断
- [ ] 关键服务有降级方案
- [ ] 熔断策略合理
- [ ] 重试机制正确
- [ ] 超时设置合理

## 7. 测试覆盖 (Test Coverage)

### 7.1 单元测试
- [ ] 核心逻辑有单元测试
- [ ] 测试覆盖率 > 80%
- [ ] 测试用例独立
- [ ] 测试名称清晰

### 7.2 集成测试
- [ ] API 有集成测试
- [ ] 数据库操作有测试
- [ ] 第三方服务调用有 Mock

### 7.3 测试质量
- [ ] 测试数据合理
- [ ] 边界条件有测试
- [ ] 异常情况有测试
- [ ] 测试可重复执行

## 8. Git 提交规范 (Git Commits)

### 8.1 提交消息
- [ ] 使用中文描述
- [ ] 格式规范（type(scope): description）
- [ ] 描述清晰准确
- [ ] 无超大提交（拆分成多个小提交）

### 8.2 提交内容
- [ ] 提交与需求对应
- [ ] 无无关改动
- [ ] 代码审查通过后合并

## 9. 文档同步 (Documentation)

### 9.1 代码文档
- [ ] 公开 API 有文档
- [ ] 复杂逻辑有注释
- [ ] README 同步更新
- [ ] API 文档同步更新

### 9.2 配置文档
- [ ] 配置文件有注释
- [ ] 部署文档同步
- [ ] 环境变量文档完整

## 10. 前端专项检查 (Frontend Specific)

### 10.1 React/TypeScript
- [ ] 类型定义完整（无 any）
- [ ] Props 接口命名规范
- [ ] Hook 使用正确
- [ ] 状态管理合理

### 10.2 Ant Design
- [ ] 优先使用标准组件
- [ ] 组件使用正确
- [ ] 样式规范一致
- [ ] 无性能反模式

### 10.3 性能
- [ ] 无不必要的重渲染
- [ ] 列表使用虚拟滚动
- [ ] 图片懒加载
- [ ] 代码分割/懒加载

## 审查输出模板

```markdown
## 代码审查结果

### 🔴 严重问题 (必须修复)
| 问题 | 位置 | 影响 | 建议 |
|------|------|------|------|
| 问题1 | 文件:行号 | 影响描述 | 修复建议 |

### 🟡 建议优化 (强烈建议)
| 问题 | 位置 | 影响 | 建议 |
|------|------|------|------|
| 问题1 | 文件:行号 | 影响描述 | 修复建议 |

### 🟢 通过项
- ✅ 功能实现正确
- ✅ 代码规范符合 antigravity-code-style
- ✅ 性能满足要求
- ✅ 测试覆盖充分

### 总体评价
[总结性评价]

### 下一步行动
- [ ] 修复严重问题后重新审查
- [ ] 优化建议可后续迭代
- [ ] 合并到主分支
```
